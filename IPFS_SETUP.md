# Как исправить отображение NFT в MetaMask

## Проблема
MetaMask не может отобразить изображения из вложенных data URI. Нужно использовать IPFS или HTTP URL.

## Решение: IPFS через Pinata (бесплатно)

**Примечание:** NFT.Storage прекратил прием новых загрузок с 30 июня 2024. Используем Pinata.

### Шаг 1: Получите API ключи
1. Зайдите на https://www.pinata.cloud/
2. Зарегистрируйтесь (бесплатно)
3. Перейдите в раздел "API Keys"
4. Создайте новый API ключ
5. Скопируйте **API Key** и **Secret Key**

### Шаг 2: Загрузите изображения на IPFS
```bash
# Установите переменные окружения с вашими API ключами
export PINATA_API_KEY="your-api-key-here"
export PINATA_SECRET_KEY="your-secret-key-here"

# Запустите скрипт загрузки
node upload-to-pinata.js
```

Скрипт загрузит все SVG на IPFS и выведет IPFS URL для каждого NFT.

### Шаг 3: Обновите контракты
Скопируйте IPFS URL из вывода скрипта и обновите контракты:
- `MalevichCollectionNFT.sol` - для ревард NFT
- `BlackSquareNFT.sol` - для Black Square NFT

### Шаг 4: Задеплойте обновленные контракты
```bash
cd contracts
npm run deploy:sepolia
```

### Шаг 5: Обновите адреса контрактов во фронтенде
Обновите `.env` файл во фронтенде с новыми адресами контрактов.

## Альтернатива: HTTP URL (требует хостинга)

Если у вас уже есть хостинг (Netlify, Vercel и т.д.):
1. SVG файлы уже созданы в `frontend/public/`
2. После деплоя они будут доступны по URL: `https://your-domain.com/nft-red-square.svg`
3. Обновите контракты с этими URL вместо IPFS

## Важно
- Старые NFT останутся со старыми изображениями
- Новые NFT будут использовать новые изображения
- Для обновления старых NFT нужно будет заминтить их заново

